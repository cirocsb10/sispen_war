<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/facelets/tags">
	
	<h:head>
		<title>Observatório Prisional Bahia</title>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	   	<sec:isAuthenticated>
		    <meta http-equiv="Refresh" content="0; URL=pages/index.jsf"/> 
	   	</sec:isAuthenticated>
	 	
		<f:facet name="first">
			<link href="#{facesContext.externalContext.requestContextPath}/css/bootstrap.css" rel="stylesheet" type="text/css" media="screen" />
			<link href="#{facesContext.externalContext.requestContextPath}/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" media="screen" />
			<link href="#{facesContext.externalContext.requestContextPath}/css/geral.css" rel="stylesheet" type="text/css" media="screen" />
		</f:facet>
	
		<script src="#{facesContext.externalContext.requestContextPath}/js/libs/bootstrap/bootstrap.js" type="text/javascript" />
		<script src="#{facesContext.externalContext.requestContextPath}/js/libs/bootstrap/bootstrap-dropdown.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/libs/bootstrap/bootstrap-collapse.js" type="text/javascript" />
		<script src="#{facesContext.externalContext.requestContextPath}/js/index.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/data-table.filters.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/callback.js" type="text/javascript" />
		<script src="#{facesContext.externalContext.requestContextPath}/js/libs/jquery/jquery.validate.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/libs/jquery/jquery.alphanumeric.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/libs/jquery/jquery.datePicker.pt-BR.js" type="text/javascript" />

        <style type="text/css">
                /* Override some defaults */
            html, body {
                background-color: #fff;
            }
            body {

            }
            .container {
                width: 350px;
                height: 300px;
                position:absolute;
                left:50%;
                top:50%;
                margin-left:-150px;
                margin-top:-175px;
            }

            .container .content {
                padding: 10px;
                -webkit-border-radius: 10px 10px 10px 10px;
                -moz-border-radius: 10px 10px 10px 10px;
                border-radius: 10px 10px 10px 10px;
                -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                -moz-box-shadow: 0 0 2px rgba(0,0,0,.15);
                box-shadow: 0 0 2px rgba(0,0,0,.15);
            }

            .login-form {
                margin-left: 65px;
            }

            legend {
                margin-right: -50px;
                font-weight: bold;
                color: #404040;
            }

        </style>

    </h:head>

	<h:body>
        <sec:isAnonymous>

            <div class="container">
                <div class="row">
                    <div class="login-form">

                        <h:panelGroup layout="block" class="alert alert-error" style="text-align: center; width: 320px;" rendered="#{param.bad_credentials}">
                            <button class="close" data-dismiss="alert">×</button>
                            <strong>Erro:  </strong>
                            <h:outputText value="Usuário ou senha incorretos!" />
                        </h:panelGroup>

                        <h:panelGroup layout="block" class="alert alert-error" style="text-align: center; width: 320px;" rendered="#{param.disabled}">
                            <button class="close" data-dismiss="alert">×</button>
                            <strong>Erro:  </strong>
                            <h:outputText value="Usuário desabilitado." /><br/>
                            <h:outputText value="Procure o administrador do sistema!" />
                        </h:panelGroup>

                        <h:panelGroup layout="block" class="alert alert-error" style="text-align: center; width: 320px;" rendered="#{param.locked}">
                            <button class="close" data-dismiss="alert">×</button>
                            <strong>Erro:  </strong>
                            <h:outputText value="Usuário bloqueado!" />
                        </h:panelGroup>

                        <p:panel header="Login" style="width: 350px;" styleClass="content">

                            <form action="j_spring_security_check" method="post">
                                <table id="grid-form" cellpadding="2" class="grid-form table-form" border="0">
                                    <tbody>
                                        <tr>
                                            <td class="right login-form-td"><h:outputLabel styleClass="right" for="j_username" value="Usuário *" /></td>
                                            <td><h:inputText id="j_username" required="true"/></td>
                                            <td><p:watermark for="j_username" value="Digite o usuário" /></td>
                                        </tr>

                                        <tr>
                                            <td class="right login-form-td"><h:outputLabel styleClass="right" for="j_password" value="Senha: * " /></td>
                                            <td><h:inputSecret id="j_password" required="true"/></td>
                                            <td><p:watermark for="j_password" value="Digite a senha" /></td>
                                        </tr>

                                        <tr>
                                            <td class="right login-form-td"><h:commandButton value="Login" styleClass="btn btn-primary" /></td>
                                            <td><a class="forgot-password" href="forgot_password.jsf">Esqueci minha senha</a></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </form>
                        </p:panel>

                    </div>
                </div>
            </div>

        </sec:isAnonymous>
    </h:body>
</html>